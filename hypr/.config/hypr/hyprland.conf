# Monitors

# Main Monitor
$MONITOR = eDP-1
env = MONITOR, $MONITOR

monitor=$MONITOR,1920x1080@60,0x0,1.33334
monitor=HDMI-A-1,3840x2160@60,auto,2

# Programs

$terminal = ghostty
$fileManager = dolphin
$menu = rofi -show drun
$browser = zen-browser

# Autostart

exec-once = waybar
exec-once = hyprpaper
exec-once = wofi
exec-once = hypridle

# cliphist
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store

# Environment variables

env = HYPRSHOT_DIR,$HOME/Pictures/Screenshots

env = XCURSOR_SIZE,20
env = XCURSOR_THEME,Bibata-Modern-Classic
env = HYPRCURSOR_SIZE,20
env = HYPRCURSOR_THEME,Bibata-Modern-Classic

exec = gsettings set org.gnome.desktop.interface gtk-theme "Adwaita-dark"   # for GTK3 apps
exec = gsettings set org.gnome.desktop.interface color-scheme "prefer-dark"   # for GTK4 apps
env = QT_QPA_PLATFORMTHEME,qt6ct   # for Qt apps

env = MOZ_ENABLE_WAYLAND,1

# Look and feel

general {
	gaps_in = 5
	gaps_out = 10

	border_size = 1

	col.active_border = rgba(38,79,120,1)
	col.inactive_border = rgba(14,33,51,0)

	resize_on_border = true

	allow_tearing = false

	layout = master
}

decoration {
	rounding = 4
	rounding_power = 2

	active_opacity = 1
	inactive_opacity = 1

	shadow {
		enabled = true
		range = 10
		render_power = 2
		color = 0x33000000
	}

	blur {
		enabled = true
		size = 3
		passes = 3
		new_optimizations = on
		ignore_opacity = true
		xray = true
	}
}

# Animations

# https://github.com/vyrx-dev/dotfiles/blob/main/.config/hypr/animations.conf
animations {

	enabled = true

	bezier = water, 0.22, 0.9, 0.36, 1.0
	bezier = flow, 0.25, 0.1, 0.25, 1.0
	bezier = ripple, 0.33, 0.0, 0.2, 1.0
	bezier = stream, 0.4, 0.0, 0.4, 1.0
	bezier = cascade, 0.19, 1.0, 0.22, 1.0
	bezier = md3_standard, 0.2, 0, 0, 1
	bezier = md3_accel, 0.3, 0, 0.8, 0.15
	bezier = overshot, 0.05, 0.9, 0.1, 1.05

	animation = windows,    1, 5, water
	animation = windowsIn,  1, 5, cascade,slide
	animation = windowsOut, 1, 1, stream,slide
	animation = windowsMove,1, 3, flow
	animation = fade,       1, 2.4, water
	animation = fadeIn,     1, 2.0, cascade
	animation = fadeOut,    1, 1.8, ripple
	animation = fadeDim,    1, 2.0, water
	animation = fadeSwitch, 1, 1.4, flow
	animation = layersIn,       1, 3, overshot, popin 80%
	animation = layersOut,       1, 3, overshot, popin 80%
	animation = layers,         1, 1.5, md3_standard
	animation = workspaces, 1, 1, flow
	animation = specialWorkspace, 1, 2.5, water
	animation = border,     1, 2.9, water
	animation = borderangle,1, 3.5, flow
}

# "Smart gaps"
# workspace = w[tv1], gapsout:0, gapsin:0
# workspace = f[1], gapsout:0, gapsin:0
# windowrule {
#     name = no-gaps-wtv1
#     match:float = false
#     match:workspace = w[tv1]
#
#     border_size = 0
#     rounding = 0
# }
#
# windowrule {
#     name = no-gaps-f1
#     match:float = false
#     match:workspace = f[1]
#
#     border_size = 0
#     rounding = 0
# }

dwindle {
	pseudotile = true
	preserve_split = true
}

master {
	new_status = slave
}

misc {
	force_default_wallpaper = 0
	disable_hyprland_logo = true
}

# Input

input {
	kb_layout = us

	follow_mouse = 1

	sensitivity = 0.3 # -1.0 - 1.0, 0 means no modification.

	touchpad {
		natural_scroll = true
	}

	repeat_rate=30
	repeat_delay=200
}

gesture = 3, horizontal, workspace

# Keybindings

$mainMod = ALT # Sets "Windows" key as main modifier

bind = $mainMod, RETURN, exec, $terminal
bind = $mainMod, Q, killactive,
bind = CTRL_ALT, DELETE, exit,
bind = $mainMod, F, fullscreen
bind = $mainMod, T, togglefloating,
bind = $mainMod, P, pseudo, # dwindle
bind = $mainMod, J, togglesplit, # dwindle

# Move focus with mainMod + arrow keys
bind = $mainMod, h, movefocus, l
bind = $mainMod, l, movefocus, r
bind = $mainMod, k, movefocus, u
bind = $mainMod, j, movefocus, d

# Move windows with mainMod + shift + arrow keys
bind = $mainMod SHIFT, H, movewindow, l
bind = $mainMod SHIFT, L, movewindow, r
bind = $mainMod SHIFT, K, movewindow, u
bind = $mainMod SHIFT, J, movewindow, d

# Switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Laptop multimedia keys for volume and LCD brightness
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp, exec, brightnessctl -e4 -n2 set 5%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%-

# Requires playerctl
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous

# PrintScreen: Screenshot of the currently active monitor/output
bind = , Print, exec, hyprshot -m output
# Alt + PrintScreen: Screenshot of the selected window
bind = ALT, Print, exec, hyprshot -m window
# Super + Shift + S: Screenshot of a rectangular region (Selection)
bind = SUPER_SHIFT, S, exec, hyprshot -m region

# Rofi
bind = $mainMod, SPACE, exec, $menu
# Emoji Picker
bind = SUPER, period, exec, rofi -show emoji
# Power Menu
bind = SUPER, P, exec, ~/.local/bin/rofi_power_menu.sh
# Clipboard history
bind = SUPER, V, exec, ~/.local/bin/rofi_cliphist.sh
# Waybar Timer
bind = SUPER, T, exec, ~/.local/bin/rofi_waybar_timer.sh

# Toggle waybar
bind = $mainMod, W, exec, killall -SIGUSR1 waybar

# Change hyprpaper wallpaper
bind = SUPER, W, exec, ~/.local/bin/change_wallpapers.sh

# App shortcuts
bind = SUPER, 1, exec, $browser
bind = SUPER, 2, exec, flatpak run com.spotify.Client
bind = SUPER, 3, exec, flatpak run com.discordapp.Discord

bind = $mainMod, E, exec, $terminal -e yazi

# Windows

windowrule {
	# Ignore maximize requests from all apps. You'll probably like this.
	name = suppress-maximize-events
	match:class = .*

	suppress_event = maximize
}

windowrule {
	# Fix some dragging issues with XWayland
	name = fix-xwayland-drags
	match:class = ^$
	match:title = ^$
	match:xwayland = true
	match:float = true
	match:fullscreen = false
	match:pin = false

	no_focus = true
}

# Hyprland-run windowrule
windowrule {
	name = move-hyprland-run

	match:class = hyprland-run

	move = 20 monitor_h-120
	float = yes
}

# Layers

layerrule = match:class selector, no_anim on

layerrule {
	name = rofi
	match:namespace = rofi
	animation = slide bottom
	blur = on
}

layerrule {
	name = dunst
	match:namespace = notifications
	animation = slide right
}

layerrule {
	name = waybar
	match:namespace = waybar
	animation = slide top
	no_anim = off
	blur = on
	blur_popups = on
	ignore_alpha = 0.4
}

